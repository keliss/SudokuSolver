package test.task.validator;

import net.test.task.validator.NumberRangeValidator;
import net.test.task.validator.model.ValidationResult;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertNotNull;
import static org.junit.jupiter.api.Assertions.assertNull;
import static org.junit.jupiter.api.Assertions.assertTrue;

public class NumberRangeValidatorTest {

    private NumberRangeValidator validator;

    @BeforeEach
    public void setup() {
        validator = new NumberRangeValidator();
    }

    @Test
    public void testGivenMatrixWithNumbersInRangeWhenValidateThenPass() {
        Integer[][] matrix = new Integer[][] {
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 }
        };

        ValidationResult result = validator.validate(matrix);

        assertFalse(result.isNotValid());
        assertNull(result.getValidationFailureMessage());
    }

    @Test
    public void testGivenMatrixWithElementGreaterThanNineWhenValidateThenFail() {
        Integer[][] matrix = new Integer[][] {
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 44, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 }
        };

        ValidationResult result = validator.validate(matrix);

        assertTrue(result.isNotValid());
        assertNotNull(result.getValidationFailureMessage());
    }

    @Test
    public void testGivenMatrixWithZeroElementWhenValidateThenFail() {
        Integer[][] matrix = new Integer[][] {
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 0, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 }
        };

        ValidationResult result = validator.validate(matrix);

        assertTrue(result.isNotValid());
        assertNotNull(result.getValidationFailureMessage());
    }

    @Test
    public void testGivenMatrixWithNegativeNumberWhenValidateThenFail() {
        Integer[][] matrix = new Integer[][] {
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, -4, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 },
                { 1, 2, 3, 4, 5, 6, 7, 8, 9 }
        };

        ValidationResult result = validator.validate(matrix);

        assertTrue(result.isNotValid());
        assertNotNull(result.getValidationFailureMessage());
    }
}
